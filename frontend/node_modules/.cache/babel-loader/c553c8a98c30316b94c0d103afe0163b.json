{"ast":null,"code":"import * as d3 from \"d3\";\nimport { colorParse } from \"../colorHelper\";\n/**\n * Reusable 3D Axis Component\n *\n * @module\n */\n\nexport default function () {\n  /* Default Properties */\n  let dimensions = {\n    x: 40,\n    y: 40,\n    z: 40\n  };\n  let color = \"black\";\n  let classed = \"d3X3dAxis\";\n  let labelPosition = \"proximal\";\n  let labelInset = labelPosition === \"distal\" ? 1 : -1;\n  /* Scale and Axis Options */\n\n  let scale;\n  let direction;\n  let tickDirection;\n  let tickArguments = [];\n  let tickValues = null;\n  let tickFormat = null;\n  let tickSize = 1.5;\n  let tickPadding = 2.0;\n  const axisDirectionVectors = {\n    x: [1, 0, 0],\n    y: [0, 1, 0],\n    z: [0, 0, 1]\n  };\n  const axisRotationVectors = {\n    x: [1, 1, 0, Math.PI],\n    y: [0, 0, 0, 0],\n    z: [0, 1, 1, Math.PI]\n  };\n  /**\n   * Get Axis Direction Vector\n   *\n   * @private\n   * @param {string} axisDir\n   * @returns {number[]}\n   */\n\n  const getAxisDirectionVector = function (axisDir) {\n    return axisDirectionVectors[axisDir];\n  };\n  /**\n   * Get Axis Rotation Vector\n   *\n   * @private\n   * @param {string} axisDir\n   * @returns {number[]}\n   */\n\n\n  const getAxisRotationVector = function (axisDir) {\n    return axisRotationVectors[axisDir];\n  };\n  /**\n   * Constructor\n   *\n   * @constructor\n   * @alias axis\n   * @param {d3.selection} selection - The chart holder D3 selection.\n   */\n\n\n  const my = function (selection) {\n    selection.each(function () {\n      const element = d3.select(this).classed(classed, true);\n      const range = scale.range();\n      const range0 = range[0];\n      const range1 = range[range.length - 1];\n      const axisDirectionVector = getAxisDirectionVector(direction);\n      const tickDirectionVector = getAxisDirectionVector(tickDirection);\n      const axisRotationVector = getAxisRotationVector(direction);\n      const tickRotationVector = getAxisRotationVector(tickDirection);\n      /*\n      // FIXME: Currently the tickArguments option does not work.\n      const tickValuesDefault = scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain();\n      tickValues = tickValues === null ? tickValuesDefault : tickValues;\n      */\n\n      tickValues = scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain();\n      const tickFormatDefault = scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : d => d;\n      tickFormat = tickFormat === null ? tickFormatDefault : tickFormat;\n\n      const shape = (el, radius, height, color) => {\n        const shape = el.append(\"Shape\");\n        shape.append(\"Cylinder\").attr(\"radius\", radius).attr(\"height\", height);\n        shape.append(\"Appearance\").append(\"Material\").attr(\"diffuseColor\", colorParse(color));\n      };\n\n      const makeSolid = (el, color) => {\n        el.append(\"Appearance\").append(\"Material\").attr(\"diffuseColor\", colorParse(color) || \"0 0 0\");\n      }; // Main Lines\n\n\n      const domain = element.selectAll(\".domain\").data([null]);\n      domain.enter().append(\"Transform\").attr(\"class\", \"domain\").attr(\"rotation\", axisRotationVector.join(\" \")).attr(\"translation\", axisDirectionVector.map(d => d * (range0 + range1) / 2).join(\" \")).call(shape, 0.1, range1 - range0, color).merge(domain);\n      domain.exit().remove(); // Tick Lines\n\n      const ticks = element.selectAll(\".tickLine\").data(tickValues, d => d);\n      ticks.enter().append(\"Transform\").attr(\"class\", \"tickLine\").attr(\"translation\", t => axisDirectionVector.map(a => scale(t) * a).join(\" \")).append(\"Transform\").attr(\"translation\", tickDirectionVector.map(d => d * tickSize / 2).join(\" \")).attr(\"rotation\", tickRotationVector.join(\" \")).call(shape, 0.05, tickSize, \"#e3e3e3\").merge(ticks);\n      ticks.transition().attr(\"translation\", t => axisDirectionVector.map(a => scale(t) * a).join(\" \"));\n      ticks.exit().remove(); // Tick Labels\n\n      if (tickFormat !== \"\") {\n        const labels = element.selectAll(\".tickLabel\").data(tickValues, d => d);\n        labels.enter().append(\"Transform\").attr(\"class\", \"tickLabel\").attr(\"translation\", t => axisDirectionVector.map(a => scale(t) * a).join(\" \")).append(\"Transform\").attr(\"translation\", tickDirectionVector.map((d, i) => labelInset * d * tickPadding + (labelInset + 1) / 2 * tickSize * tickDirectionVector[i])).append(\"Billboard\").attr(\"axisOfRotation\", \"0 0 0\").append(\"Shape\").call(makeSolid, \"black\").append(\"Text\").attr(\"string\", d => `\"${tickFormat(d)}\"`).append(\"FontStyle\").attr(\"size\", 1.3).attr(\"family\", \"\\\"SANS\\\"\").attr(\"style\", \"BOLD\").attr(\"justify\", \"\\\"MIDDLE\\\" \\\"MIDDLE\\\"\").merge(labels);\n        labels.transition().attr(\"translation\", t => axisDirectionVector.map(a => scale(t) * a).join(\" \")).select(\"Transform\").attr(\"translation\", tickDirectionVector.map((d, i) => labelInset * d * tickPadding + (labelInset + 1) / 2 * tickSize * tickDirectionVector[i])).on(\"start\", function () {\n          d3.select(this).select(\"Billboard\").select(\"Shape\").select(\"Text\").attr(\"string\", d => `\"${tickFormat(d)}\"`);\n        });\n        labels.exit().remove();\n      } else {\n        element.selectAll(\".tickLabel\").remove();\n      }\n    });\n  };\n  /**\n   * Dimensions Getter / Setter\n   *\n   * @param {{x: number, y: number, z: number}} _v - 3D object dimensions.\n   * @returns {*}\n   */\n\n\n  my.dimensions = function (_v) {\n    if (!arguments.length) return dimensions;\n    dimensions = _v;\n    return my;\n  };\n  /**\n   * Scale Getter / Setter\n   *\n   * @param {d3.scale} _v - D3 Scale.\n   * @returns {*}\n   */\n\n\n  my.scale = function (_v) {\n    if (!arguments.length) return scale;\n    scale = _v;\n    return my;\n  };\n  /**\n   * Direction Getter / Setter\n   *\n   * @param {string} _v - Direction of Axis (e.g. \"x\", \"y\", \"z\").\n   * @returns {*}\n   */\n\n\n  my.direction = function (_v) {\n    if (!arguments.length) return direction;\n    direction = _v;\n    return my;\n  };\n  /**\n   * Tick Direction Getter / Setter\n   *\n   * @param {string} _v - Direction of Ticks (e.g. \"x\", \"y\", \"z\").\n   * @returns {*}\n   */\n\n\n  my.tickDirection = function (_v) {\n    if (!arguments.length) return tickDirection;\n    tickDirection = _v;\n    return my;\n  };\n  /**\n   * Tick Arguments Getter / Setter\n   *\n   * @param {Array} _v - Tick arguments.\n   * @returns {Array<*>}\n   */\n\n\n  my.tickArguments = function (_v) {\n    if (!arguments.length) return tickArguments;\n    tickArguments = _v;\n    return my;\n  };\n  /**\n   * Tick Values Getter / Setter\n   *\n   * @param {Array} _v - Tick values.\n   * @returns {*}\n   */\n\n\n  my.tickValues = function (_v) {\n    if (!arguments.length) return tickValues;\n    tickValues = _v;\n    return my;\n  };\n  /**\n   * Tick Format Getter / Setter\n   *\n   * @param {string} _v - Tick format.\n   * @returns {*}\n   */\n\n\n  my.tickFormat = function (_v) {\n    if (!arguments.length) return tickFormat;\n    tickFormat = _v;\n    return my;\n  };\n  /**\n   * Tick Size Getter / Setter\n   *\n   * @param {number} _v - Tick length.\n   * @returns {*}\n   */\n\n\n  my.tickSize = function (_v) {\n    if (!arguments.length) return tickSize;\n    tickSize = _v;\n    return my;\n  };\n  /**\n   * Tick Padding Getter / Setter\n   *\n   * @param {number} _v - Tick padding size.\n   * @returns {*}\n   */\n\n\n  my.tickPadding = function (_v) {\n    if (!arguments.length) return tickPadding;\n    tickPadding = _v;\n    return my;\n  };\n  /**\n   * Color Getter / Setter\n   *\n   * @param {string} _v - Color (e.g. \"red\" or \"#ff0000\").\n   * @returns {*}\n   */\n\n\n  my.color = function (_v) {\n    if (!arguments.length) return color;\n    color = _v;\n    return my;\n  };\n  /**\n   * Label Position Getter / Setter\n   *\n   * @param {string} _v - Position (\"proximal\" or \"distal\")\n   * @returns {*}\n   */\n\n\n  my.labelPosition = function (_v) {\n    if (!arguments.length) return labelPosition;\n    labelPosition = _v;\n    labelInset = labelPosition === \"distal\" ? 1 : -1;\n    return my;\n  };\n\n  return my;\n}","map":{"version":3,"sources":["C:/Users/Michael Wilke/Desktop/Scout/frontend/node_modules/d3-x3d/src/component/axis.js"],"names":["d3","colorParse","dimensions","x","y","z","color","classed","labelPosition","labelInset","scale","direction","tickDirection","tickArguments","tickValues","tickFormat","tickSize","tickPadding","axisDirectionVectors","axisRotationVectors","Math","PI","getAxisDirectionVector","axisDir","getAxisRotationVector","my","selection","each","element","select","range","range0","range1","length","axisDirectionVector","tickDirectionVector","axisRotationVector","tickRotationVector","ticks","apply","domain","tickFormatDefault","d","shape","el","radius","height","append","attr","makeSolid","selectAll","data","enter","join","map","call","merge","exit","remove","t","a","transition","labels","i","on","_v","arguments"],"mappings":"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","sourcesContent":["import * as d3 from \"d3\";\nimport { colorParse } from \"../colorHelper\";\n\n/**\n * Reusable 3D Axis Component\n *\n * @module\n */\nexport default function() {\n\n\t/* Default Properties */\n\tlet dimensions = { x: 40, y: 40, z: 40 };\n\tlet color = \"black\";\n\tlet classed = \"d3X3dAxis\";\n\tlet labelPosition = \"proximal\";\n\tlet labelInset = labelPosition === \"distal\" ? 1 : -1;\n\n\t/* Scale and Axis Options */\n\tlet scale;\n\tlet direction;\n\tlet tickDirection;\n\tlet tickArguments = [];\n\tlet tickValues = null;\n\tlet tickFormat = null;\n\tlet tickSize = 1.5;\n\tlet tickPadding = 2.0;\n\n\tconst axisDirectionVectors = {\n\t\tx: [1, 0, 0],\n\t\ty: [0, 1, 0],\n\t\tz: [0, 0, 1]\n\t};\n\n\tconst axisRotationVectors = {\n\t\tx: [1, 1, 0, Math.PI],\n\t\ty: [0, 0, 0, 0],\n\t\tz: [0, 1, 1, Math.PI]\n\t};\n\n\t/**\n\t * Get Axis Direction Vector\n\t *\n\t * @private\n\t * @param {string} axisDir\n\t * @returns {number[]}\n\t */\n\tconst getAxisDirectionVector = function(axisDir) {\n\t\treturn axisDirectionVectors[axisDir];\n\t};\n\n\t/**\n\t * Get Axis Rotation Vector\n\t *\n\t * @private\n\t * @param {string} axisDir\n\t * @returns {number[]}\n\t */\n\tconst getAxisRotationVector = function(axisDir) {\n\t\treturn axisRotationVectors[axisDir];\n\t};\n\n\t/**\n\t * Constructor\n\t *\n\t * @constructor\n\t * @alias axis\n\t * @param {d3.selection} selection - The chart holder D3 selection.\n\t */\n\tconst my = function(selection) {\n\t\tselection.each(function() {\n\n\t\t\tconst element = d3.select(this)\n\t\t\t\t.classed(classed, true);\n\n\t\t\tconst range = scale.range();\n\t\t\tconst range0 = range[0];\n\t\t\tconst range1 = range[range.length - 1];\n\n\t\t\tconst axisDirectionVector = getAxisDirectionVector(direction);\n\t\t\tconst tickDirectionVector = getAxisDirectionVector(tickDirection);\n\t\t\tconst axisRotationVector = getAxisRotationVector(direction);\n\t\t\tconst tickRotationVector = getAxisRotationVector(tickDirection);\n\n\t\t\t/*\n\t\t\t// FIXME: Currently the tickArguments option does not work.\n\t\t\tconst tickValuesDefault = scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain();\n\t\t\ttickValues = tickValues === null ? tickValuesDefault : tickValues;\n\t\t\t*/\n\t\t\ttickValues = scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain();\n\n\t\t\tconst tickFormatDefault = scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : (d) => d;\n\t\t\ttickFormat = tickFormat === null ? tickFormatDefault : tickFormat;\n\n\t\t\tconst shape = (el, radius, height, color) => {\n\t\t\t\tconst shape = el.append(\"Shape\");\n\n\t\t\t\tshape.append(\"Cylinder\")\n\t\t\t\t\t.attr(\"radius\", radius)\n\t\t\t\t\t.attr(\"height\", height);\n\n\t\t\t\tshape.append(\"Appearance\")\n\t\t\t\t\t.append(\"Material\")\n\t\t\t\t\t.attr(\"diffuseColor\", colorParse(color));\n\t\t\t};\n\n\t\t\tconst makeSolid = (el, color) => {\n\t\t\t\tel.append(\"Appearance\")\n\t\t\t\t\t.append(\"Material\")\n\t\t\t\t\t.attr(\"diffuseColor\", colorParse(color) || \"0 0 0\");\n\t\t\t};\n\n\t\t\t// Main Lines\n\t\t\tconst domain = element.selectAll(\".domain\")\n\t\t\t\t.data([null]);\n\n\t\t\tdomain.enter()\n\t\t\t\t.append(\"Transform\")\n\t\t\t\t.attr(\"class\", \"domain\")\n\t\t\t\t.attr(\"rotation\", axisRotationVector.join(\" \"))\n\t\t\t\t.attr(\"translation\", axisDirectionVector.map((d) => (d * (range0 + range1) / 2)).join(\" \"))\n\t\t\t\t.call(shape, 0.1, range1 - range0, color)\n\t\t\t\t.merge(domain);\n\n\t\t\tdomain.exit()\n\t\t\t\t.remove();\n\n\t\t\t// Tick Lines\n\t\t\tconst ticks = element.selectAll(\".tickLine\")\n\t\t\t\t.data(tickValues, (d) => d);\n\n\t\t\tticks.enter()\n\t\t\t\t.append(\"Transform\")\n\t\t\t\t.attr(\"class\", \"tickLine\")\n\t\t\t\t.attr(\"translation\", (t) => (axisDirectionVector.map((a) => (scale(t) * a)).join(\" \")))\n\t\t\t\t.append(\"Transform\")\n\t\t\t\t.attr(\"translation\", tickDirectionVector.map((d) => (d * tickSize / 2)).join(\" \"))\n\t\t\t\t.attr(\"rotation\", tickRotationVector.join(\" \"))\n\t\t\t\t.call(shape, 0.05, tickSize, \"#e3e3e3\")\n\t\t\t\t.merge(ticks);\n\n\t\t\tticks.transition()\n\t\t\t\t.attr(\"translation\", (t) => (axisDirectionVector.map((a) => (scale(t) * a)).join(\" \")));\n\n\t\t\tticks.exit()\n\t\t\t\t.remove();\n\n\t\t\t// Tick Labels\n\t\t\tif (tickFormat !== \"\") {\n\t\t\t\tconst labels = element.selectAll(\".tickLabel\")\n\t\t\t\t\t.data(tickValues, (d) => d);\n\n\t\t\t\tlabels.enter()\n\t\t\t\t\t.append(\"Transform\")\n\t\t\t\t\t.attr(\"class\", \"tickLabel\")\n\t\t\t\t\t.attr(\"translation\", (t) => (axisDirectionVector.map((a) => (scale(t) * a)).join(\" \")))\n\t\t\t\t\t.append(\"Transform\")\n\t\t\t\t\t.attr(\"translation\", tickDirectionVector.map((d, i) => (labelInset * d * tickPadding) + (((labelInset + 1) / 2) * tickSize * tickDirectionVector[i])))\n\t\t\t\t\t.append(\"Billboard\")\n\t\t\t\t\t.attr(\"axisOfRotation\", \"0 0 0\")\n\t\t\t\t\t.append(\"Shape\")\n\t\t\t\t\t.call(makeSolid, \"black\")\n\t\t\t\t\t.append(\"Text\")\n\t\t\t\t\t.attr(\"string\", (d) => `\"${tickFormat(d)}\"`)\n\t\t\t\t\t.append(\"FontStyle\")\n\t\t\t\t\t.attr(\"size\", 1.3)\n\t\t\t\t\t.attr(\"family\", \"\\\"SANS\\\"\")\n\t\t\t\t\t.attr(\"style\", \"BOLD\")\n\t\t\t\t\t.attr(\"justify\", \"\\\"MIDDLE\\\" \\\"MIDDLE\\\"\")\n\t\t\t\t\t.merge(labels);\n\n\t\t\t\tlabels.transition()\n\t\t\t\t\t.attr(\"translation\", (t) => (axisDirectionVector.map((a) => (scale(t) * a)).join(\" \")))\n\t\t\t\t\t.select(\"Transform\")\n\t\t\t\t\t.attr(\"translation\", tickDirectionVector.map((d, i) => (labelInset * d * tickPadding) + (((labelInset + 1) / 2) * tickSize * tickDirectionVector[i])))\n\t\t\t\t\t.on(\"start\", function() {\n\t\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t\t.select(\"Billboard\")\n\t\t\t\t\t\t\t.select(\"Shape\")\n\t\t\t\t\t\t\t.select(\"Text\")\n\t\t\t\t\t\t\t.attr(\"string\", (d) => `\"${tickFormat(d)}\"`);\n\t\t\t\t\t});\n\n\t\t\t\tlabels.exit()\n\t\t\t\t\t.remove();\n\t\t\t} else {\n\t\t\t\telement.selectAll(\".tickLabel\")\n\t\t\t\t\t.remove();\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * Dimensions Getter / Setter\n\t *\n\t * @param {{x: number, y: number, z: number}} _v - 3D object dimensions.\n\t * @returns {*}\n\t */\n\tmy.dimensions = function(_v) {\n\t\tif (!arguments.length) return dimensions;\n\t\tdimensions = _v;\n\t\treturn my;\n\t};\n\n\t/**\n\t * Scale Getter / Setter\n\t *\n\t * @param {d3.scale} _v - D3 Scale.\n\t * @returns {*}\n\t */\n\tmy.scale = function(_v) {\n\t\tif (!arguments.length) return scale;\n\t\tscale = _v;\n\t\treturn my;\n\t};\n\n\t/**\n\t * Direction Getter / Setter\n\t *\n\t * @param {string} _v - Direction of Axis (e.g. \"x\", \"y\", \"z\").\n\t * @returns {*}\n\t */\n\tmy.direction = function(_v) {\n\t\tif (!arguments.length) return direction;\n\t\tdirection = _v;\n\t\treturn my;\n\t};\n\n\t/**\n\t * Tick Direction Getter / Setter\n\t *\n\t * @param {string} _v - Direction of Ticks (e.g. \"x\", \"y\", \"z\").\n\t * @returns {*}\n\t */\n\tmy.tickDirection = function(_v) {\n\t\tif (!arguments.length) return tickDirection;\n\t\ttickDirection = _v;\n\t\treturn my;\n\t};\n\n\t/**\n\t * Tick Arguments Getter / Setter\n\t *\n\t * @param {Array} _v - Tick arguments.\n\t * @returns {Array<*>}\n\t */\n\tmy.tickArguments = function(_v) {\n\t\tif (!arguments.length) return tickArguments;\n\t\ttickArguments = _v;\n\t\treturn my;\n\t};\n\n\t/**\n\t * Tick Values Getter / Setter\n\t *\n\t * @param {Array} _v - Tick values.\n\t * @returns {*}\n\t */\n\tmy.tickValues = function(_v) {\n\t\tif (!arguments.length) return tickValues;\n\t\ttickValues = _v;\n\t\treturn my;\n\t};\n\n\t/**\n\t * Tick Format Getter / Setter\n\t *\n\t * @param {string} _v - Tick format.\n\t * @returns {*}\n\t */\n\tmy.tickFormat = function(_v) {\n\t\tif (!arguments.length) return tickFormat;\n\t\ttickFormat = _v;\n\t\treturn my;\n\t};\n\n\t/**\n\t * Tick Size Getter / Setter\n\t *\n\t * @param {number} _v - Tick length.\n\t * @returns {*}\n\t */\n\tmy.tickSize = function(_v) {\n\t\tif (!arguments.length) return tickSize;\n\t\ttickSize = _v;\n\t\treturn my;\n\t};\n\n\t/**\n\t * Tick Padding Getter / Setter\n\t *\n\t * @param {number} _v - Tick padding size.\n\t * @returns {*}\n\t */\n\tmy.tickPadding = function(_v) {\n\t\tif (!arguments.length) return tickPadding;\n\t\ttickPadding = _v;\n\t\treturn my;\n\t};\n\n\t/**\n\t * Color Getter / Setter\n\t *\n\t * @param {string} _v - Color (e.g. \"red\" or \"#ff0000\").\n\t * @returns {*}\n\t */\n\tmy.color = function(_v) {\n\t\tif (!arguments.length) return color;\n\t\tcolor = _v;\n\t\treturn my;\n\t};\n\n\t/**\n\t * Label Position Getter / Setter\n\t *\n\t * @param {string} _v - Position (\"proximal\" or \"distal\")\n\t * @returns {*}\n\t */\n\tmy.labelPosition = function(_v) {\n\t\tif (!arguments.length) return labelPosition;\n\t\tlabelPosition = _v;\n\t\tlabelInset = labelPosition === \"distal\" ? 1 : -1;\n\t\treturn my;\n\t};\n\n\treturn my;\n}\n"]},"metadata":{},"sourceType":"module"}